import{s as e,c as t,w as o,i as a,o as n,a as r,b as s}from"./index-BgYbFa8y.js";let i=null,d=[];const c={startRecording:()=>new Promise(((t,o)=>{var a;navigator.mediaDevices?(null==(a=navigator.permissions)||a.query({name:"microphone"}).then((t=>{"denied"!==t.state||e({title:"请开启麦克风权限后再使用录音功能",icon:"none"})})),navigator.mediaDevices.enumerateDevices().then((t=>{t.some((e=>"audioinput"===e.kind))||e({title:"未检测到麦克风设备，无法录音",icon:"none"})})),navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{d=[],i=new MediaRecorder(e),i.start(),i.ondataavailable=e=>{d.push(e.data)},i.onstop=()=>{const e=new Blob(d,{type:"audio/webm"}),o=URL.createObjectURL(e);t({platform:"h5",tempFilePath:o,blob:e})}})).catch((e=>{o(e),"NotFoundError"===e.name?o("未检测到麦克风设备，请检查是否连接或授权"):"NotAllowedError"===e.name?o("麦克风权限被拒绝，请在浏览器设置中允许"):o(e)}))):o("当前浏览器不支持录音")})),stopRecording(){i&&"recording"===i.state&&i.stop()}};let l=null,m=[],u=null;const p={startRecording:async()=>new Promise(((e,t)=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((t=>{u=t,m=[],l=new MediaRecorder(t),l.start(),l.ondataavailable=e=>{m.push(e.data)},l.onstop=()=>{const t=new Blob(m,{type:"video/webm"}),o=URL.createObjectURL(t);e({platform:"h5",tempFilePath:o,blob:t})}})).catch((e=>{"NotAllowedError"===e.name?t("请允许访问摄像头与麦克风"):"NotFoundError"===e.name?t("未检测到摄像头或麦克风设备"):t(e)})):t("浏览器不支持视频录制")})),stopRecording(){l&&"recording"===l.state&&(l.stop(),u&&u.getTracks().forEach((e=>e.stop())))}};const R=((e,t)=>{const o=e.__vccOpts||e;for(const[a,n]of t)o[a]=n;return o})({data:()=>({title:"Hello"}),onLoad(){},methods:{startAudioRecord(){c.startRecording().then((e=>{console.log("startAudioRecord",e)}))},stopAudioRecord(){c.stopRecording()},startVideoRecord(){p.startRecording().then((e=>{console.log("startVideoRecord",e)}))},stopVideoRecord(){p.stopRecording()}}},[["render",function(e,i,d,c,l,m){const u=a;return n(),t(u,{class:"content"},{default:o((()=>[r(u,{class:"content-item",onClick:i[0]||(i[0]=e=>m.startAudioRecord())},{default:o((()=>[s(" 开始录制音频 ")])),_:1}),r(u,{class:"content-item",onClick:i[1]||(i[1]=e=>m.stopAudioRecord())},{default:o((()=>[s(" 结束录制音频 ")])),_:1}),r(u,{class:"content-item",onClick:i[2]||(i[2]=e=>m.startVideoRecord())},{default:o((()=>[s(" 开始录制视频 ")])),_:1}),r(u,{class:"content-item",onClick:i[3]||(i[3]=e=>m.stopVideoRecord())},{default:o((()=>[s(" 结束录制视频 ")])),_:1})])),_:1})}],["__scopeId","data-v-6f7fd286"]]);export{R as default};
